{"version":3,"file":"js/484.98ee2188.js","mappings":"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","sources":["webpack://smoke_show/./src/views/PoiShow.vue?d8a3","webpack://smoke_show/./src/views/PoiShow.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx } from \"vue\"\n\nimport mapData from \"@/composables/result-page/exampleData\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { Ref, ref } from \"vue\";\r\nimport axios from \"axios\";\r\nimport { selectInfo } from \"@/composables/baseTypes\";\r\nimport {\r\n    openErrorMessage,\r\n    openSuccessMessage,\r\n    openWarningMessage,\r\n} from \"@/composables/utilsFunction\";\r\nimport moment from 'moment';\r\nimport { setupFilter } from \"@/composables/result-page/initFilter\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PoiShow',\n  setup(__props) {\n\r\nlet databaseData: Ref<selectInfo[]> = ref([] as selectInfo[])\r\ndatabaseData = mapData;\r\nconst inDatabase:Ref<boolean> = ref(false)\r\n// 由于RESTful API是一次性发送请求的，因此似乎难以实现定期从服务器回传数据的功能。\r\nconst controller = new AbortController();\r\nElMessage.info(\"正在查询数据库，请耐心等候。\");\r\nconst waitTimeOut = setTimeout(() => {\r\n    openWarningMessage(\"预测算法运算时间比预想中要长，请耐心等候。\");\r\n}, 12000);\r\nconst stopQueryTimeOut = setTimeout(() => {\r\n    openErrorMessage(\r\n        \"等待结果返回超时，将停止等待。请检查后端服务器是否连通和正常运行。\"\r\n    );\r\n    controller.abort(); // 停止axios等待\r\n}, 45000);\r\n\r\naxios\r\n    .post(\"/selectAllData\", {\r\n        signal: controller.signal,\r\n    }) // 发送请求，等待返回结果\r\n    .then((response) => {\r\n        // 提取response中的数据\r\n        return response.data;\r\n    })\r\n    .then((data) => {\r\n        if (data.message === \"成功找到数据\") {\r\n            openSuccessMessage(\"添加完成，成功返回数据。\");\r\n            databaseData.value = data.original_data\r\n            inDatabase.value = true\r\n        } else {\r\n            openWarningMessage(\"添加错误，加载初始数据\");\r\n        }\r\n        showTableData(databaseData)\r\n        clear(waitTimeOut, stopQueryTimeOut)\r\n    })\r\n    .catch(\r\n        // 捕获错误，显示错误\r\n        (error: Error) => {\r\n            clear(\r\n                waitTimeOut,\r\n                stopQueryTimeOut,\r\n                error.message\r\n            );\r\n        }\r\n    );\r\n\r\n/**\r\n * 统一清除timeout\r\n * @param waitTimeOut\r\n * @param stopQueryTimeOut\r\n * @param isSubmittingQueryForm\r\n * @param errorMessage\r\n */\r\nfunction clear(\r\n    waitTimeOut: number,\r\n    stopQueryTimeOut: number,\r\n    errorMessage: string = \"\"\r\n) {\r\n    clearTimeout(waitTimeOut);\r\n    clearTimeout(stopQueryTimeOut);\r\n\r\n    if (errorMessage != \"\") {\r\n        openErrorMessage(errorMessage, \"long\");\r\n    }\r\n}\r\n\r\n// 转换格式\r\nfunction formatDate(date: Date) {\r\n    return moment(date).format('YYYY-MM-DD');\r\n}\r\n// 展示数据\r\nfunction showTableData(data: Ref<selectInfo[]>) {\r\n    console.log(data.value)\r\n}\r\n// 转换\r\nfunction optionLabel(value: string, type: number) {\r\n    const { filterAttribute, signOption, fireTypeOption, fireIntensityOption, windDirectionOption } = setupFilter();\r\n    let options: Array<{ value: string, label: string }>;\r\n    if (type === 1)\r\n        options = fireTypeOption\r\n    else if (type === 2)\r\n        options = fireIntensityOption\r\n    else if (type === 3)\r\n        options = windDirectionOption\r\n    else\r\n        options = []\r\n    const option = options.find((option: any) => option.value === value);\r\n    return option ? option.label : \"\";\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_table_column = _resolveComponent(\"el-table-column\")!\n  const _component_el_table = _resolveComponent(\"el-table\")!\n\n  return (_openBlock(), _createBlock(_component_el_table, {\n    data: _unref(databaseData),\n    height: \"640\",\n    stripe: \"\",\n    border: \"\",\n    style: {\"width\":\"100%\"}\n  }, {\n    default: _withCtx(() => [\n      (inDatabase.value)\n        ? (_openBlock(), _createBlock(_component_el_table_column, {\n            key: 0,\n            prop: \"id\",\n            label: \"数据序号\",\n            sortable: \"\",\n            width: \"120\"\n          }))\n        : _createCommentVNode(\"\", true),\n      _createVNode(_component_el_table_column, {\n        prop: \"beaufort\",\n        label: \"风速强度\",\n        sortable: \"\",\n        width: \"120\"\n      }),\n      _createVNode(_component_el_table_column, {\n        prop: \"fireBrigade\",\n        label: \"消防队伍\",\n        sortable: \"\",\n        width: \"120\"\n      }),\n      _createVNode(_component_el_table_column, {\n        prop: \"money\",\n        label: \"财产损失\",\n        sortable: \"\",\n        width: \"120\"\n      }),\n      _createVNode(_component_el_table_column, {\n        prop: \"victim\",\n        label: \"受害人数\",\n        sortable: \"\",\n        width: \"120\"\n      }),\n      _createVNode(_component_el_table_column, {\n        prop: \"rainfall\",\n        label: \"降雨量\",\n        sortable: \"\",\n        width: \"120\"\n      }),\n      _createVNode(_component_el_table_column, {\n        prop: \"temperature\",\n        label: \"温度\",\n        sortable: \"\",\n        width: \"120\"\n      }),\n      _createVNode(_component_el_table_column, {\n        prop: \"humidity\",\n        label: \"相对湿度\",\n        sortable: \"\",\n        width: \"120\"\n      }),\n      _createVNode(_component_el_table_column, {\n        prop: \"fireType\",\n        label: \"火灾类型\",\n        sortable: \"\",\n        width: \"120\"\n      }, {\n        default: _withCtx((scope) => [\n          _createTextVNode(_toDisplayString(optionLabel(scope.row.fireType, 1)), 1)\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_el_table_column, {\n        prop: \"fireIntensity\",\n        label: \"火势强度\",\n        sortable: \"\",\n        width: \"120\"\n      }, {\n        default: _withCtx((scope) => [\n          _createTextVNode(_toDisplayString(optionLabel(scope.row.fireIntensity, 2)), 1)\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_el_table_column, {\n        prop: \"windDirection\",\n        label: \"风向\",\n        sortable: \"\",\n        width: \"120\"\n      }, {\n        default: _withCtx((scope) => [\n          _createTextVNode(_toDisplayString(optionLabel(scope.row.windDirection, 3)), 1)\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_el_table_column, {\n        prop: \"start_time\",\n        label: \"开始时间\",\n        width: \"120\"\n      }, {\n        default: _withCtx((scope) => [\n          _createTextVNode(_toDisplayString(formatDate(scope.row.start_time)), 1)\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_el_table_column, {\n        prop: \"end_time\",\n        label: \"结束时间\",\n        width: \"120\"\n      }, {\n        default: _withCtx((scope) => [\n          _createTextVNode(_toDisplayString(formatDate(scope.row.end_time)), 1)\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_el_table_column, { label: \"地址信息\" }, {\n        default: _withCtx(() => [\n          _createVNode(_component_el_table_column, {\n            prop: \"lat\",\n            label: \"纬度\",\n            width: \"120\"\n          }),\n          _createVNode(_component_el_table_column, {\n            prop: \"lng\",\n            label: \"经度\",\n            width: \"120\"\n          }),\n          _createVNode(_component_el_table_column, {\n            prop: \"province\",\n            label: \"省\",\n            width: \"180\"\n          }),\n          _createVNode(_component_el_table_column, {\n            prop: \"city\",\n            label: \"市\",\n            width: \"180\"\n          }),\n          _createVNode(_component_el_table_column, {\n            prop: \"area\",\n            label: \"区\",\n            width: \"180\"\n          }),\n          _createVNode(_component_el_table_column, {\n            prop: \"address\",\n            label: \"详细位置\",\n            width: \"180\"\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }, 8, [\"data\"]))\n}\n}\n\n})","import script from \"./PoiShow.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./PoiShow.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./PoiShow.vue?vue&type=style&index=0&id=70cb0140&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_defineComponent","__name","setup","__props","databaseData","ref","mapData","inDatabase","controller","AbortController","ElMessage","waitTimeOut","setTimeout","openWarningMessage","stopQueryTimeOut","openErrorMessage","abort","clear","errorMessage","clearTimeout","formatDate","date","moment","format","showTableData","data","console","log","value","optionLabel","type","filterAttribute","signOption","fireTypeOption","fireIntensityOption","windDirectionOption","setupFilter","options","option","find","label","axios","signal","then","response","message","openSuccessMessage","original_data","catch","error","_ctx","_cache","_component_el_table_column","_resolveComponent","_component_el_table","_openBlock","_createBlock","_unref","height","stripe","border","style","default","_withCtx","key","prop","sortable","width","_createCommentVNode","_createVNode","scope","_createTextVNode","_toDisplayString","row","fireType","_","fireIntensity","windDirection","start_time","end_time","__exports__"],"sourceRoot":""}