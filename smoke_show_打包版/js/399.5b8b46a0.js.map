{"version":3,"file":"js/399.5b8b46a0.js","mappings":"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","sources":["webpack://smoke_show/./src/views/Analogdetect.vue?d301","webpack://smoke_show/./src/views/Analogdetect.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, vShow as _vShow, withDirectives as _withDirectives, unref as _unref, createTextVNode as _createTextVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-cef0053a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { style: {\"width\":\"100%\"} }\nconst _hoisted_2 = { style: {\"min-width\":\"1500px\",\"min-height\":\"650px\"} }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"el-upload__text\" }, [\n  /*#__PURE__*/_createTextVNode(\" 将文件拖到此处，或\"),\n  /*#__PURE__*/_createElementVNode(\"em\", null, \"点击上传\")\n], -1))\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"el-upload__tip\" }, \" 仅支持JPG、PNG、MP4格式 \", -1))\n\nimport { Ref, ref, computed, watch, getCurrentInstance, ComponentInternalInstance, reactive, onMounted } from \"vue\";\r\nimport { compressAccurately } from 'image-conversion'\r\nimport { openSuccessMessage, removeElButtonFocus } from \"@/composables/utilsFunction\";\r\nimport { Plus, UploadFilled } from '@element-plus/icons-vue'\r\nimport { openErrorMessage, openWarningMessage, } from \"@/composables/utilsFunction\";\r\nimport { genFileId } from 'element-plus'\r\nimport { router } from \"@/router\";\r\nimport type { UploadFile, UploadProps, UploadInstance, UploadRawFile, UploadProgressEvent, UploadFiles } from 'element-plus'\r\n\r\n// 骨架屏\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Analogdetect',\n  setup(__props) {\n\r\nconst isSubmittingQueryForm: Ref<boolean> = ref(false);\r\n\r\n// 添加活动展示照片,改变图片变化\r\nconst beforeUploadVideo: UploadProps['onChange'] = (uploadFile, uploadFiles) => {\r\n    if (uploadFile.raw) {\r\n        const isJPG = uploadFile.raw.type === \"image/jpeg\" || uploadFile.raw.type === \"image/png\" || uploadFile.raw.type === \"image/jpg\";\r\n        const isMP4 = uploadFile.raw.type === \"video/mp4\";\r\n        if (!isJPG && !isMP4) {\r\n            openErrorMessage(\"只能是JPG、PNG、MP4格式!\");\r\n            uploadFiles.splice(-1, 1);\r\n            return false;\r\n        }\r\n    }\r\n    if (uploadFile.size) {\r\n        const isLess5M = uploadFile.size / 1024 / 1024 < 25;\r\n        if (!isLess5M) {\r\n            openErrorMessage(\"上传文件大小不能超过 25MB!\");\r\n            uploadFiles.splice(-1, 1);//移除过大文件\r\n            return false;\r\n        }\r\n    }\r\n    openSuccessMessage(\"成功上传视频，请稍等片刻\");// 骨架屏开关\r\n    isSubmittingQueryForm.value = true; // 显示过渡画面\r\n    // 全屏骨架屏\r\n    var html = document.getElementById(\"skeleton-height\");\r\n    if (html !== null)\r\n        html.style.height = String(document.documentElement.clientHeight - 75) + \"px\" // -75 为了减去导航栏显示小字\r\n}\r\n\r\nconst upload = ref<UploadInstance>()\r\n\r\nconst handleExceed: UploadProps['onExceed'] = (files) => {\r\n    upload.value!.clearFiles()\r\n    const file = files[0] as UploadRawFile\r\n    file.uid = genFileId()\r\n    upload.value!.handleStart(file)\r\n}\r\n\r\nconst handleSuccess: UploadProps['onSuccess'] = (response: any, uploadFile: UploadFile, uploadFiles: UploadFiles) => {\r\n    const params = { resultdata: response };\r\n    if (response.message === \"成功检测，但是并无目标\") {\r\n        openSuccessMessage(\"成功检测，但是并无目标\");\r\n        uploadFiles.splice(-1, 1);//移除错误文件\r\n        isSubmittingQueryForm.value = false;\r\n    }\r\n    else {\r\n        router.push({\r\n            // 跳转到结果页\r\n            name: \"Mapbox\",\r\n            state: { params },\r\n        })\r\n\r\n    }\r\n}\r\n\r\n// 骨架屏自适应高度\r\nwindow.onresize = function () {\r\n    var html = document.getElementById(\"skeleton-height\");\r\n    if (html !== null)\r\n        html.style.height = String(document.documentElement.clientHeight - 75) + \"px\" // -75 为了减去导航栏显示小字\r\n}\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_skeleton_item = _resolveComponent(\"el-skeleton-item\")!\n  const _component_el_skeleton = _resolveComponent(\"el-skeleton\")!\n  const _component_el_container = _resolveComponent(\"el-container\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_upload = _resolveComponent(\"el-upload\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _withDirectives(_createVNode(_component_el_container, { id: \"skeleton-screen\" }, {\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_1, [\n          _createVNode(_component_el_skeleton, { animated: \"\" }, {\n            template: _withCtx(() => [\n              _createVNode(_component_el_skeleton_item, {\n                id: \"skeleton-height\",\n                variant: \"image\",\n                style: {\"width\":\"100%\",\"height\":\"100%\"}\n              })\n            ]),\n            _: 1\n          })\n        ])\n      ]),\n      _: 1\n    }, 512), [\n      [_vShow, isSubmittingQueryForm.value]\n    ]),\n    _withDirectives(_createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_component_el_upload, {\n        ref_key: \"upload\",\n        ref: upload,\n        class: \"upload-demo\",\n        drag: \"\",\n        action: \"/addAutoVideo\",\n        style: {\"width\":\"500px\",\"margin\":\"auto\"},\n        \"before-upload\": beforeUploadVideo,\n        limit: 1,\n        \"on-exceed\": handleExceed,\n        \"on-success\": handleSuccess\n      }, {\n        tip: _withCtx(() => [\n          _hoisted_4\n        ]),\n        default: _withCtx(() => [\n          _createVNode(_component_el_icon, { class: \"el-icon--upload\" }, {\n            default: _withCtx(() => [\n              _createVNode(_unref(UploadFilled))\n            ]),\n            _: 1\n          }),\n          _hoisted_3\n        ]),\n        _: 1\n      }, 512)\n    ], 512), [\n      [_vShow, !isSubmittingQueryForm.value]\n    ])\n  ], 64))\n}\n}\n\n})","import script from \"./Analogdetect.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./Analogdetect.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./Analogdetect.vue?vue&type=style&index=0&id=cef0053a&scoped=true&lang=css\"\nimport \"./Analogdetect.vue?vue&type=style&index=1&id=cef0053a&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\23055\\\\Desktop\\\\smoke_show\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-cef0053a\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","style","_hoisted_2","_hoisted_3","_createElementVNode","class","_createTextVNode","_hoisted_4","_defineComponent","__name","setup","__props","isSubmittingQueryForm","ref","beforeUploadVideo","uploadFile","uploadFiles","raw","isJPG","type","isMP4","openErrorMessage","splice","size","isLess5M","openSuccessMessage","value","html","document","getElementById","height","String","documentElement","clientHeight","upload","handleExceed","files","clearFiles","file","uid","genFileId","handleStart","handleSuccess","response","params","resultdata","message","router","name","state","window","onresize","_ctx","_cache","_component_el_skeleton_item","_resolveComponent","_component_el_skeleton","_component_el_container","_component_el_icon","_component_el_upload","_openBlock","_createElementBlock","_Fragment","_withDirectives","_createVNode","id","default","_withCtx","animated","template","variant","_","_vShow","ref_key","drag","action","limit","tip","_unref","UploadFilled","__exports__"],"sourceRoot":""}